> 교재 속 코드 https://github.com/AcornPublishing/toby-spring3-1/tree/main/Vol1-31/Ch2
> 

### 테스트

객체지향과 테스트 

- 스프링은 IoC와 DI로 오브젝트의 확장과 변화에 대한 유연함을 제공한다.
- 테스트는 그러한 변화에 대처할 수 있는 자신감을 준다.

작은 단위의 테스트

- 한 가지 관심에 집중할 수 있는 작은 단위에 대해 테스트하자.
- 여기서 말하는 단위란 무엇인지, 그 크기와 범위가 어느 정도인지 딱 정해진 건 아니다.
- 테스트로 확인하는 대상과 조건이 간단하고 명확하면 된다.

테스트의 실패

- 테스트 에러: 테스트가 진행되는 동안 에러가 발생해서 실패하는 경우
    - 에러 메시지와 긴 호출 스택 정보가 출력되므로 알아보기 쉽다.
- 테스트 실패: 에러는 없지만 그 결과가 기대한 바와 다른 경우

자동화된 테스트가 필요한 이유

- 테스트 실패를 일일이 눈으로 확인하지 않아도 됨.
- 만들어진 코드의 기능을 모두 점검하는 포괄적인 테스트를 작성하고 나면 변경에 영향을 받는 부분을 빠르게 확인하고 조치할 수 있게 됨.

> 테스트란 개발자가 마음 편하게 잠자리에 들 수 있게 해주는 것
- xUnit 프레임워크 개발자 켄트 벡
> 

JUnit 

- JUnit은 사실상 자바의 표준 테스팅 프레임워크라고 불릴 만큼 폭넓게 사용되고 있다. 스프링을 학습하고 제대로 활용하려면 최소한의 JUnit 테스트 작성 방법과 실행 방법은 알고 있어야 한다.
- JUnitCore를 이용하여 main()을 직접 만들어도 가능하지만, 자바 IDE에 내장된 테스트 지원 도구를 사용하는게 편하다.

테스트 작성 시 지켜야할 것 

- 코드에 변경사항이 없다면 테스트는 항상 동일한 결과를 내야 한다.
- 성공하는 테스트만 만들지 말자. 한 가지 결과만 검증하고 말면 더 위험하다.

> 항상 네거티브 테스트를 먼저 만들라
- 스프링 창시자 로드 존슨
> 

### TDD

- 추가하고 싶은 기능을 일단 코드로 표현한다. 마치 기능 정의서 처럼.
- “실패한 테스트를 성공시키기 위한 목적이 아닌 코드는 만들지 않는다.”
- 테스트 코드 작성과 이를 성공시키기 위한 애플리케이션 코드 작성의 작업 주기를 가능한 한 짧게 가져간다.

픽스처 

- 테스트를 수행하는 데 필요한 정보나 오브젝트

### 학습 테스트

- 자신이 만들지 않은 프레임워크나 라이브러리 등에 대해 작성하는 테스트.

목적 

- 자신이 사용할 API나 프레임워크의 기능을 테스트로 보면서 사용 방법을 익히는 것.

장점

- 다양한 조건에 따라 기능이 어떻게 다르게 동작하는지 확인.
- 다양한 기능과 조건에 대한 테스트 코드는 결국 실제 개발에서 쓰일 샘플 코드가 됨.
- 버전 업그레이드 시 호환성 검증에 활용.
- 테스트 코드 작성 훈련이 됨.
- 새로운 기술을 직접 써보며 익히는 즐거움.

테스트용 Spring ApplicationContext 테스트 

### 버그 테스트

- 코드에 오류가 있을 때 그 오류를 가장 잘 드러내줄 수 있는 테스트.

작성 순서

1. 일단 버그가 원인이 되어 실패하는 테스트를 만든다.
2. 이후 버그 테스트가 성공할 수 있도록 애플리케이션 코드를 수정한다. 

장점

- 기존 테스트에서 검증이 부족했던 부분을 보완.
- 버그의 원인을 분석하는 계기.

동등 분할

- 같은 결과를 내는 값의 범위를 구분해서 각 대표 값으로 테스트를 하는 방법을 말한다. 어떤 작업의 결과의 종류가 true, false 또는 예외발생 세 가지라면 각 결과를 내는 입력 값이나 상황의 조합을 만들어 모든 경우에 대한 테스트를 해보는 것이 좋다.

경계값 분석 

- 에러는 동등분할 범위의 경계에서 주로 많이 발생한다는 특징을 이용해서 경계의 근처에 있는 값을 이용해 테스트하는 방법이다. 보통 숫자의 입력 값인 경우 0이나 그 주변 값 또는 정수의 최대값, 최소값 등으로 테스트해보면 도움이 될 때가 많다.

### 배운 점

- 당연하게 @Autowired를 클래스에 붙이고 사용하던 방식이 왜 널리 퍼졌는지 알게 되었음.
- 테스트 코드 작성이 어렵다면 이미 코드 짜는 데도 어려움을 겪고 있다는 것. 오히려 테스트 코드는 마음껏 시도해보고 실패해보는 기회의 장.
